/**
 * balanced.js v0.0.9
 */
var balanced=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b){function c(a){if(a=a||{},!a.open)throw new Error('Balanced: please provide a "open" property');if(!a.close)throw new Error('Balanced: please provide a "close" property');this.head=a.head||a.open,this.balance=a.balance||!1,this.exceptions=a.exceptions||!1,this.close=a.close,this.open=a.open,this.caseInsensitive=a.caseInsensitive}c.prototype={escapeRegExp:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},regExpFromArray:function(a,b,c){var d=a.map(function(a){return a instanceof RegExp?a.source:this.escapeRegExp(a)},this).join("|");return d=c?"("+d+")":"(?:"+d+")",new RegExp(d,b||void 0)},regExpFromArrayGroupedMap:function(a){return this.regExpFromArray([a],null,!0)},matchContentsInBetweenBrackets:function(a,b){var c=Array.isArray(this.head)?this.head:[this.head],d=Array.isArray(this.open)?this.open:[this.open],e=Array.isArray(this.close)?this.close:[this.close];if(!Array.isArray(c)||!Array.isArray(d)||!Array.isArray(e)||c.length!==d.length||d.length!==e.length)throw new Error('Balanced: if you use arrays for a "head,open,close" you must use matching arrays for all options');for(var f,g=this.regExpFromArray(c.map(this.regExpFromArrayGroupedMap,this)),h=this.regExpFromArray(d.map(this.regExpFromArrayGroupedMap,this)),i=this.regExpFromArray(e.map(this.regExpFromArrayGroupedMap,this)),j=this.regExpFromArray([g,h,i],"g"+(this.caseInsensitive?"i":"")),k=c.length,l=[],m=[],n=null,o=!0;f=j.exec(a);){if(b){for(var p=!1,q=0;q<b.length;q++)f.index>=b[q].index&&f.index<=b[q].index+b[q].length&&(p=!0);if(p)continue}var r=f.indexOf(f[0],1)-1,s=Math.floor(r/k),t=r-Math.floor(r/k)*k;if(n||0!==s||this.balance&&(!this.balance||l.length)){if(1===s||0===s)l.push(t);else if(2===s){var u=l.pop();if(u===t)null!==n&&0===l.length&&(m.push({index:n.index,length:f.index+f[0].length-n.index,head:n[0],tail:f[0]}),n=null);else if(this.balance&&(o=!1,this.exceptions)){if(void 0===u)throw new Error("Balanced: unexpected close bracket at "+f.index);if(u!==t)throw new Error("Balanced: mismatching close bracket at "+f.index+' expected "'+e[u]+'" but found "'+e[t]+'"')}}}else n=f,this.balance?l.push(t):l=[t]}if(this.balance){if(this.exceptions&&(!o||0!==l.length))throw new Error("Balanced: expected close bracket at "+(a.length-1));return o&&0===l.length?m:null}return m},replaceMatchesInString:function(a,b,c){for(var d=0,e=0;e<a.length;e++){var f=a[e],g=c(b.substr(f.index+d+f.head.length,f.length-f.head.length-f.tail.length),f.head,f.tail);b=b.substr(0,f.index+d)+g+b.substr(f.index+d+f.length,b.length-(f.index+d+f.length)),d+=g.length-f.length}return b},replaceMatchesInBetweenBrackets:function(a,b,c){var d=this.matchContentsInBetweenBrackets(a,c);return this.replaceMatchesInString(d,a,b)}},b.replaceMatchesInString=c.prototype.replaceMatchesInString,b.replacements=function(a){a=a||{};var b=new c({head:a.head,open:a.open,close:a.close,balance:a.balance,exceptions:a.exceptions,caseInsensitive:a.caseInsensitive});if(!a.source)throw new Error('Balanced: please provide a "source" property');if("function"!=typeof a.replace)throw new Error('Balanced: please provide a "replace" function');return b.replaceMatchesInBetweenBrackets(a.source,a.replace)},b.getRangesForMatch=function(a,b){for(var c,d=new RegExp(b),e=[];c=d.exec(a);)e.push({length:c[0].length,index:c.index});return e},b.matches=function(a){var b=new c({head:a.head,open:a.open,close:a.close,balance:a.balance,exceptions:a.exceptions,caseInsensitive:a.caseInsensitive});if(!a.source)throw new Error('Balanced: please provide a "source" property');return b.matchContentsInBetweenBrackets(a.source,a.ignore)}}]);